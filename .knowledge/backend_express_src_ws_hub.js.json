{"is_source_file": true, "format": "JavaScript", "description": "This is a WebSocket server implementation for real-time communication in a multiplayer chess platform. It manages client connections, authentication, game room management, and message broadcasting.", "external_files": ["../auth/auth"], "external_methods": ["verifyJwt"], "published": ["createWebSocketServer", "notifyUser", "broadcastToGame"], "classes": [], "methods": [{"name": "createWebSocketServer(httpServer, { path })", "description": "Creates and initializes a WebSocket server bound to an existing HTTP server, setting up connection handling and message processing.", "scope": "", "scopeKind": ""}, {"name": "notifyUser(userId, payload)", "description": "Sends a payload message to all active WebSocket connections associated with a specific user ID.", "scope": "", "scopeKind": ""}, {"name": "broadcastToGame(gameId, payload)", "description": "Broadcasts a payload message to all WebSocket connections currently in a specified game room.", "scope": "", "scopeKind": ""}, {"name": "cleanupClient(ws)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "handleMessage(ws, msg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "joinGameRoom(ws, gameId)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "leaveGameRoom(ws, gameId)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "registerClient(ws, userId)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "safeSend(ws, obj)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["JSON.parse", "verifyJwt", "safeSend", "registerClient", "cleanupClient", "joinGameRoom", "leaveGameRoom"], "search-terms": ["WebSocket server", "multiplayer chess messaging", "auth token verification", "game room management", "client connection handling"], "state": 2, "file_id": 20, "knowledge_revision": 52, "git_revision": "", "ctags": [{"_type": "tag", "name": "WebSocket", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^const WebSocket = require('ws');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "broadcastToGame", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^function broadcastToGame(gameId, payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(gameId, payload)"}, {"_type": "tag", "name": "cleanupClient", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^function cleanupClient(ws) {$/", "language": "JavaScript", "kind": "function", "signature": "(ws)"}, {"_type": "tag", "name": "clientsByUserId", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^const clientsByUserId = new Map(); \\/\\/ userId -> Set(ws)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "createWebSocketServer", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^function createWebSocketServer(httpServer, { path }) {$/", "language": "JavaScript", "kind": "function", "signature": "(httpServer, { path })"}, {"_type": "tag", "name": "createWebSocketServer", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^module.exports = { createWebSocketServer, notifyUser, broadcastToGame };$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "gameRooms", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^const gameRooms = new Map(); \\/\\/ gameId -> Set(ws)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleMessage", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^function handleMessage(ws, msg) {$/", "language": "JavaScript", "kind": "function", "signature": "(ws, msg)"}, {"_type": "tag", "name": "joinGameRoom", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^function joinGameRoom(ws, gameId) {$/", "language": "JavaScript", "kind": "function", "signature": "(ws, gameId)"}, {"_type": "tag", "name": "leaveGameRoom", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^function leaveGameRoom(ws, gameId) {$/", "language": "JavaScript", "kind": "function", "signature": "(ws, gameId)"}, {"_type": "tag", "name": "notifyUser", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^function notifyUser(userId, payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, payload)"}, {"_type": "tag", "name": "registerClient", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^function registerClient(ws, userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(ws, userId)"}, {"_type": "tag", "name": "safeSend", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/ws/hub.js", "pattern": "/^function safeSend(ws, obj) {$/", "language": "JavaScript", "kind": "function", "signature": "(ws, obj)"}], "hash": "932677e37e42907d0d4d468497e96669", "format-version": 4, "code-base-name": "backend_express", "filename": "backend_express/src/ws/hub.js", "fields": [{"name": "module.exports = { createWebSocketServer, notifyUser, broadcastToGame };", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"52": ""}]}