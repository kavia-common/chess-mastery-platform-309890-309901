{"is_source_file": true, "format": "JavaScript", "description": "This file implements the MatchmakingController class for managing user matchmaking in a chess platform. It includes methods for users to join or leave the matchmaking queue, check their status, and internally performs the matching logic including game creation and user notification.", "external_files": ["../db/pool", "../ws/hub"], "external_methods": ["require('../db/pool').getPool", "notifyUser"], "published": ["MatchmakingController"], "classes": [{"name": "MatchmakingController", "description": "Controller class managing user matchmaking operations including join, leave, status, and internal match-making process."}], "methods": [{"name": "join(req, res, next)", "description": "Adds the user to the matchmaking queue, updates their rating snapshot, and attempts to find a match immediately.", "scope": "MatchmakingController", "scopeKind": "class"}, {"name": "leave(req, res, next)", "description": "Removes the user from the matchmaking queue.", "scope": "MatchmakingController", "scopeKind": "class"}, {"name": "status(req, res, next)", "description": "Returns the user's current matchmaking status and queue entry details.", "scope": "MatchmakingController", "scopeKind": "class"}, {"name": "tryMatch()", "description": "Attempts to pair queued users into a game, creates a new game record, and notifies the users. Performs atomic database operations and manages game creation.", "scope": "MatchmakingController", "scopeKind": "class"}], "calls": ["require('../db/pool').getPool", "notifyUser", "query", "client.query", "client.release"], "search-terms": ["matchmaking controller", "join queue", "leave queue", "match making logic", "create game", "rating snapshot", "notify user"], "state": 2, "file_id": 23, "knowledge_revision": 55, "git_revision": "", "ctags": [{"_type": "tag", "name": "MatchmakingController", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/controllers/matchmaking.js", "pattern": "/^class MatchmakingController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "START_FEN", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/controllers/matchmaking.js", "pattern": "/^const START_FEN = 'rnbqkbnr\\/pppppppp\\/8\\/8\\/8\\/8\\/PPPPPPPP\\/RNBQKBNR w KQkq - 0 1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/controllers/matchmaking.js", "pattern": "/^module.exports = new MatchmakingController();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "join", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/controllers/matchmaking.js", "pattern": "/^  async join(req, res, next) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res, next)", "scope": "MatchmakingController", "scopeKind": "class"}, {"_type": "tag", "name": "leave", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/controllers/matchmaking.js", "pattern": "/^  async leave(req, res, next) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res, next)", "scope": "MatchmakingController", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/controllers/matchmaking.js", "pattern": "/^  async status(req, res, next) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res, next)", "scope": "MatchmakingController", "scopeKind": "class"}, {"_type": "tag", "name": "tryMatch", "path": "/home/kavia/workspace/code-generation/chess-mastery-platform-309890-309901/backend_express/src/controllers/matchmaking.js", "pattern": "/^  async tryMatch() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "MatchmakingController", "scopeKind": "class"}], "hash": "4f2fccc48642a938d26260b677c09f07", "format-version": 4, "code-base-name": "backend_express", "filename": "backend_express/src/controllers/matchmaking.js", "fields": [{"name": "module.exports = new MatchmakingController();", "scope": "module", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"55": ""}]}